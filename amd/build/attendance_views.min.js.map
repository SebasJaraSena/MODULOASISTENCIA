{"version":3,"file":"attendance_views.min.js","sources":["../src/attendance_views.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Events for the grading interface.\n * @module     local_asistencia/attendance_views\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @copyright  2024 Luis Pérez <lfperezv@sena.edu.co>\n **/\n\n\n\ndefine(['jquery'], function($) {\n    return {\n        init:function() {\n            function tableStickyColumns(percent) { // Acomodador de columnas estáticas\n                const stickyColumns = document.querySelectorAll('.sticky-column');\n                const table = document.getElementById('attendance-table');\n                const div = table.querySelectorAll('th.sticky-column').length;\n                const tdColumns = table.querySelectorAll('td.sticky-column').length;\n                stickyColumns.forEach((column, index) => {\n                    const width = column.offsetWidth;\n                    column.style.width = width + 'px';\n                    if(index == 0){\n                        table.querySelectorAll('th.sticky-column')[index].style.left = (percent*0)+'px';\n                        table.querySelectorAll('td.sticky-column')[index].style.left = (percent*0)+'px';\n                        table.querySelectorAll('th.sticky-column')[index].style.backgroundColor = '#f1f1f1';\n                    }\n                    else if(index < div){\n                        const columnWidth = parseInt(table.querySelectorAll('th.sticky-column')[index-1].style.width.slice(0,-2));\n                        const columnLeft = parseInt(table.querySelectorAll('th.sticky-column')[index-1].style.left.slice(0,-2));\n                        table.querySelectorAll('th.sticky-column')[index].style.left =  ((columnWidth+columnLeft)*percent)+ 'px';\n                        table.querySelectorAll('th.sticky-column')[index].style.backgroundColor = '#f1f1f1';\n                        const leftPosition = table.querySelectorAll('th.sticky-column')[index].style.left;\n                        table.querySelectorAll('td.sticky-column')[index].style.left = leftPosition;\n                    }\n                    else if(index < tdColumns){\n                        const leftPosition = table.querySelectorAll('th.sticky-column')[index%div].style.left;\n                        table.querySelectorAll('td.sticky-column')[index].style.left = leftPosition;\n                    }\n                    if(index < tdColumns){\n                        const text = table.querySelectorAll('td.sticky-column')[index].outerText;\n                        if (text === 'SUSPENDIDO'){\n                            table.querySelectorAll('td.sticky-column')[index].style.backgroundColor = '#fcefdc';\n                        } else if (text === 'ACTIVO'){\n                            table.querySelectorAll('td.sticky-column')[index].style.backgroundColor = '#def1de';\n                        }else {\n                            table.querySelectorAll('td.sticky-column')[index].style.backgroundColor = '#f1f1f1';\n                        }\n                    }\n                });\n            }\n            function waitForElement(selector, callback) {\n                const interval = setInterval(() => {\n                    if (document.querySelector(selector)) {\n                        clearInterval(interval);\n                        callback();\n                    }\n                }, 100); // Check every 100ms\n            }\n            $(document).ready(function () {\n                waitForElement('#attendance-table', function() {\n                    // Your function or code here\n                    if(window.innerWidth > 768){\n                        tableStickyColumns(1);\n                    }\n                    else{\n                        tableStickyColumns(0.2);\n                    }\n                    window.addEventListener('resize', function () {\n                        const mainbox = document.getElementById('region-main-box');\n                        mainbox.style.setProperty('flex', '0 0 100%', 'important');\n                        mainbox.style.setProperty('max-width', '100%', 'important');\n                        if (this.innerWidth <= 768){\n                            tableStickyColumns(0.2)\n                        }\n                        else{\n                            tableStickyColumns(1)\n                        }\n                    })\n                    \n                });\n            });\n\n           \n        }\n    };\n});"],"names":["define","$","init","tableStickyColumns","percent","stickyColumns","document","querySelectorAll","table","getElementById","div","length","tdColumns","forEach","column","index","width","offsetWidth","style","left","backgroundColor","columnWidth","parseInt","slice","columnLeft","leftPosition","text","outerText","ready","selector","callback","interval","setInterval","querySelector","clearInterval","waitForElement","window","innerWidth","addEventListener","mainbox","setProperty","this"],"mappings":";;;;;;AAwBAA,2CAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAK,oBACQC,mBAAmBC,eAClBC,cAAgBC,SAASC,iBAAiB,kBAC1CC,MAAQF,SAASG,eAAe,oBAChCC,IAAMF,MAAMD,iBAAiB,oBAAoBI,OACjDC,UAAYJ,MAAMD,iBAAiB,oBAAoBI,OAC7DN,cAAcQ,SAAQ,CAACC,OAAQC,eACrBC,MAAQF,OAAOG,eACrBH,OAAOI,MAAMF,MAAQA,MAAQ,KACjB,GAATD,MACCP,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAMC,KAAgB,EAARf,QAAW,KAC3EI,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAMC,KAAgB,EAARf,QAAW,KAC3EI,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAME,gBAAkB,eAEzE,GAAGL,MAAQL,IAAI,OACVW,YAAcC,SAASd,MAAMD,iBAAiB,oBAAoBQ,MAAM,GAAGG,MAAMF,MAAMO,MAAM,GAAG,IAChGC,WAAaF,SAASd,MAAMD,iBAAiB,oBAAoBQ,MAAM,GAAGG,MAAMC,KAAKI,MAAM,GAAG,IACpGf,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAMC,MAAUE,YAAYG,YAAYpB,QAAU,KACpGI,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAME,gBAAkB,gBACpEK,aAAejB,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAMC,KAC7EX,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAMC,KAAOM,kBAE9D,GAAGV,MAAQH,UAAU,OAChBa,aAAejB,MAAMD,iBAAiB,oBAAoBQ,MAAML,KAAKQ,MAAMC,KACjFX,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAMC,KAAOM,gBAEhEV,MAAQH,UAAU,OACXc,KAAOlB,MAAMD,iBAAiB,oBAAoBQ,OAAOY,UAE3DnB,MAAMD,iBAAiB,oBAAoBQ,OAAOG,MAAME,gBAD/C,eAATM,KAC0E,UAC1D,WAATA,KACmE,UAEA,cAa1FzB,EAAEK,UAAUsB,OAAM,qBARMC,SAAUC,gBACxBC,SAAWC,aAAY,KACrB1B,SAAS2B,cAAcJ,YACvBK,cAAcH,UACdD,cAEL,KAGHK,CAAe,qBAAqB,WAE7BC,OAAOC,WAAa,IACnBlC,mBAAmB,GAGnBA,mBAAmB,IAEvBiC,OAAOE,iBAAiB,UAAU,iBACxBC,QAAUjC,SAASG,eAAe,mBACxC8B,QAAQrB,MAAMsB,YAAY,OAAQ,WAAY,aAC9CD,QAAQrB,MAAMsB,YAAY,YAAa,OAAQ,aAC3CC,KAAKJ,YAAc,IACnBlC,mBAAmB,IAGnBA,mBAAmB"}